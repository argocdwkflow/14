Parfait âœ… tu fais rÃ©fÃ©rence au deuxiÃ¨me outil officiel annoncÃ© par Red Hat dans la documentation RHEL 9, celui basÃ© sur DNF et le Kernel ABI Stable Lists plugin.
Câ€™est effectivement un outil intÃ©grÃ© depuis RHEL 9 pour valider la compatibilitÃ© des modules kernel tiers (kmods) avec le noyau Red Hat.

Voici le dÃ©tail complet ğŸ‘‡


---

ğŸ§© 2. DNF Plugin â€” kernel-abi-stablelists

ğŸ“˜ PrÃ©sentation officielle (Red Hat Doc RHEL 9)

> â€œThe kernel-abi-stablelists package provides the list of stable kernel symbols for external module validation and a DNF plugin to enforce kernel ABI compatibility.â€



ğŸ‘‰ RÃ©fÃ©rence :
ğŸ“„ Red Hat Enterprise Linux 9 â€” Managing, monitoring, and updating the kernel
Section : â€œUsing the kernel ABI stable list to verify external kernel module compatibilityâ€


---

ğŸ§  Objectif

Cet outil permet de :

VÃ©rifier la compatibilitÃ© ABI entre un module tiers et le kernel installÃ©.

EmpÃªcher lâ€™installation de modules RPM non compatibles (ex : DKMS ou kmod tiers).

Garantir que seules les fonctions/symboles â€œstablesâ€ du kernel sont utilisÃ©s.



---

âš™ï¸ Installation

dnf install kernel-abi-stablelists

Cela installe :

Les fichiers ABI stables :
/usr/lib/modules/<version_kernel>/kernel/kabi_whitelist

Le plugin DNF :
/usr/lib/python3.9/site-packages/dnf-plugins/kernel_abi.py



---

ğŸ§ª VÃ©rification / Utilisation

1. Lister les symboles ABI stables :

cat /usr/lib/modules/$(uname -r)/kabi_whitelist


2. Tester un module externe (par ex. seos.ko) :

/usr/libexec/kmodtool check-kabi /lib/modules/$(uname -r)/extra/seos.ko

ou via DNF :

dnf check-kabi <package-name>


3. Lors dâ€™une installation DNF, le plugin valide automatiquement :

Running transaction check
Checking kABI compatibility for module: seos.ko ... FAILED
Error: module seos.ko not compliant with kernel ABI




---

ğŸ”’ IntÃ©gration SÃ©curitÃ©

CouplÃ© Ã  :

Secure Boot

fapolicyd

kmodsign / mokutil

Insights â€“ kernel compliance


â†’ Tu obtiens un Ã©cosystÃ¨me complet pour valider et sÃ©curiser les modules chargÃ©s sur RHEL 9.


---

ğŸ§¾ Exemple dâ€™audit automatique

#!/bin/bash
echo "Kernel ABI check for external modules:"
for mod in /lib/modules/$(uname -r)/extra/*.ko; do
  echo "Checking $(basename $mod)..."
  /usr/libexec/kmodtool check-kabi "$mod" || echo "âš ï¸ Non compliant: $mod"
done

Sortie :

Checking seos.ko...
âš ï¸ Non compliant: /lib/modules/5.14.0-362.24.1.el9_3.x86_64/extra/seos.ko


---

âœ… En rÃ©sumÃ©

Outil	Nom du paquet	Fonction

DNF Kernel ABI Plugin	kernel-abi-stablelists	VÃ©rifie la compatibilitÃ© ABI des modules
Commande	dnf check-kabi ou kmodtool check-kabi	Validation automatique
But	Ã‰viter les modules non conformes au kernel RHEL 9	
Doc Red Hat	â€œManaging, monitoring and updating the kernelâ€ (Chapitre Kernel ABI Stable List)	



---

Souhaites-tu que je te montre un exemple concret de rapport de validation (JSON / lisible par Ansible) basÃ© sur ce plugin DNF, que tu pourrais intÃ©grer Ã  ton projet